{% extends 'admin/base_site.html' %}

{% block content %}
<h1>Thống kê cửa hàng</h1>
<p><strong>Số lượng cửa hàng:</strong> {{ store_count }}</p>

<!-- Bộ lọc thời gian -->
<form method="get">
    <label for="time_period">Thống kê theo:</label>
    <select name="time_period" id="time_period" onchange="this.form.submit()">
        <option value="month" {% if time_filter=='month' %}selected{% endif %}>Tháng</option>
        <option value="quarter" {% if time_filter=='quarter' %}selected{% endif %}>Quý</option>
        <option value="year" {% if time_filter=='year' %}selected{% endif %}>Năm</option>
    </select>
</form>

<table border="1">
    <thead>
        <tr>
            <th>Tên cửa hàng</th>
            <th>Xếp hạng</th>
            <th>Số sản phẩm</th>
            <th>Tổng doanh số</th>
        </tr>
    </thead>
    <tbody>
        {% for p in stats %}
        <tr>
            <td><strong>{{ p.name }}</strong></td>
            <td>{{ p.rating }}</td>
            <td>{{ p.product_count }}</td>
            <td>{{ p.total_sales|default:0 }} VND</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
